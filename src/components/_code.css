/* ==========================================================================
   NoCSS Code & Syntax Highlighting
   Coloration syntaxique sans classes inline
   ========================================================================== */

/* Code inline */
code {
  padding: var(--space-1) var(--space-2);
  background-color: var(--color-background-secondary);
  border-radius: var(--radius-sm);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Courier New', monospace;
  font-size: 0.9em;
  color: var(--color-error-600);
}

/* Blocs de code */
pre {
  padding: var(--space-6);
  background-color: var(--color-background-secondary);
  border: 1px solid var(--color-border);
  border-radius: var(--radius-lg);
  overflow-x: auto;
  margin: var(--space-6) 0;
  line-height: 1.6;
  max-width: 100%;
  word-wrap: break-word;
  white-space: pre-wrap;
}

pre code {
  padding: 0;
  background: none;
  border-radius: 0;
  color: var(--color-text);
  font-size: var(--text-sm);
  max-width: 100%;
  display: block;
}

/* Numéros de ligne */
pre[data-line-numbers] {
  padding-left: var(--space-12);
  position: relative;
  counter-reset: line;
}

pre[data-line-numbers] code {
  display: block;
}

pre[data-line-numbers] code > span {
  display: block;
  counter-increment: line;
}

pre[data-line-numbers] code > span::before {
  content: counter(line);
  position: absolute;
  left: var(--space-3);
  width: var(--space-8);
  text-align: right;
  color: var(--color-text-tertiary);
  user-select: none;
}

/* ==========================================================================
   Syntax Highlighting - Data Attribute Based
   ========================================================================== */

/* Keywords - Mots-clés des langages */
[data-token="keyword"] {
  color: #d73a49; /* Rouge */
  font-weight: var(--font-semibold);
}

/* Strings - Chaînes de caractères */
[data-token="string"] {
  color: #032f62; /* Bleu foncé */
}

/* Comments - Commentaires */
[data-token="comment"] {
  color: #6a737d; /* Gris */
  font-style: italic;
}

/* Numbers - Nombres */
[data-token="number"] {
  color: #005cc5; /* Bleu */
}

/* Functions - Noms de fonctions */
[data-token="function"] {
  color: #6f42c1; /* Violet */
  font-weight: var(--font-medium);
}

/* Operators - Opérateurs */
[data-token="operator"] {
  color: #d73a49; /* Rouge */
}

/* Punctuation - Ponctuation */
[data-token="punctuation"] {
  color: #24292e; /* Noir */
}

/* HTML/XML specific */
[data-token="tag"] {
  color: #22863a; /* Vert */
  font-weight: var(--font-medium);
}

[data-token="attr-name"] {
  color: #6f42c1; /* Violet */
}

[data-token="attr-value"] {
  color: #032f62; /* Bleu foncé */
}

/* CSS specific */
[data-token="selector"] {
  color: #6f42c1; /* Violet */
  font-weight: var(--font-medium);
}

[data-token="property"] {
  color: #005cc5; /* Bleu */
}

[data-token="value"] {
  color: #032f62; /* Bleu foncé */
}

/* JavaScript specific */
[data-token="variable"] {
  color: #e36209; /* Orange */
}

[data-token="class-name"] {
  color: #6f42c1; /* Violet */
  font-weight: var(--font-semibold);
}

[data-token="boolean"] {
  color: #005cc5; /* Bleu */
  font-weight: var(--font-semibold);
}

[data-token="null"],
[data-token="undefined"] {
  color: #005cc5; /* Bleu */
  font-weight: var(--font-semibold);
}

[data-token="regex"] {
  color: #032f62; /* Bleu foncé */
  background-color: rgba(3, 47, 98, 0.05);
}

/* Language indicators */
pre[data-lang]::before {
  content: attr(data-lang);
  position: absolute;
  top: var(--space-2);
  right: var(--space-3);
  padding: var(--space-1) var(--space-3);
  background-color: var(--color-gray-200);
  color: var(--color-text-secondary);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  font-weight: var(--font-semibold);
  text-transform: uppercase;
  font-family: var(--font-sans);
}

pre[data-lang] {
  position: relative;
  padding-top: var(--space-10);
}

/* Mode sombre - auto (prefers-color-scheme) */
@media (prefers-color-scheme: dark) {
  html.theme-auto pre,
  pre {
    background-color: var(--color-gray-900);
    border-color: var(--color-gray-700);
  }

  html.theme-auto code,
  code {
    background-color: var(--color-gray-800);
  }
}

/* Mode sombre - forcé */
html.theme-dark pre {
  background-color: var(--color-gray-900);
  border-color: var(--color-gray-700);
}

html.theme-dark code {
  background-color: var(--color-gray-800);
}

/* Syntax highlighting tokens - Mode sombre (auto) */
@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="keyword"],
  [data-token="keyword"] {
    color: #ff7b72;
  }
}

/* Syntax highlighting tokens - Mode sombre (forcé) */
html.theme-dark [data-token="keyword"] {
  color: #ff7b72;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="string"],
  [data-token="string"] {
    color: #a5d6ff;
  }
}

html.theme-dark [data-token="string"] {
  color: #a5d6ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="comment"],
  [data-token="comment"] {
    color: #8b949e;
  }
}

html.theme-dark [data-token="comment"] {
  color: #8b949e;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="number"],
  [data-token="number"] {
    color: #79c0ff;
  }
}

html.theme-dark [data-token="number"] {
  color: #79c0ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="function"],
  [data-token="function"] {
    color: #d2a8ff;
  }
}

html.theme-dark [data-token="function"] {
  color: #d2a8ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="operator"],
  [data-token="operator"] {
    color: #ff7b72;
  }
}

html.theme-dark [data-token="operator"] {
  color: #ff7b72;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="punctuation"],
  [data-token="punctuation"] {
    color: #c9d1d9;
  }
}

html.theme-dark [data-token="punctuation"] {
  color: #c9d1d9;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="tag"],
  [data-token="tag"] {
    color: #7ee787;
  }
}

html.theme-dark [data-token="tag"] {
  color: #7ee787;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="attr-name"],
  [data-token="attr-name"] {
    color: #d2a8ff;
  }
}

html.theme-dark [data-token="attr-name"] {
  color: #d2a8ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="attr-value"],
  [data-token="attr-value"] {
    color: #a5d6ff;
  }
}

html.theme-dark [data-token="attr-value"] {
  color: #a5d6ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="selector"],
  [data-token="selector"] {
    color: #d2a8ff;
  }
}

html.theme-dark [data-token="selector"] {
  color: #d2a8ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="property"],
  [data-token="property"] {
    color: #79c0ff;
  }
}

html.theme-dark [data-token="property"] {
  color: #79c0ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="value"],
  [data-token="value"] {
    color: #a5d6ff;
  }
}

html.theme-dark [data-token="value"] {
  color: #a5d6ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="variable"],
  [data-token="variable"] {
    color: #ffa657;
  }
}

html.theme-dark [data-token="variable"] {
  color: #ffa657;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="class-name"],
  [data-token="class-name"] {
    color: #d2a8ff;
  }
}

html.theme-dark [data-token="class-name"] {
  color: #d2a8ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="boolean"],
  html.theme-auto [data-token="null"],
  html.theme-auto [data-token="undefined"],
  [data-token="boolean"],
  [data-token="null"],
  [data-token="undefined"] {
    color: #79c0ff;
  }
}

html.theme-dark [data-token="boolean"],
html.theme-dark [data-token="null"],
html.theme-dark [data-token="undefined"] {
  color: #79c0ff;
}

@media (prefers-color-scheme: dark) {
  html.theme-auto [data-token="regex"],
  [data-token="regex"] {
    color: #a5d6ff;
    background-color: rgba(165, 214, 255, 0.1);
  }
}

html.theme-dark [data-token="regex"] {
  color: #a5d6ff;
  background-color: rgba(165, 214, 255, 0.1);
}

@media (prefers-color-scheme: dark) {
  html.theme-auto pre[data-lang]::before,
  pre[data-lang]::before {
    background-color: var(--color-gray-800);
    color: var(--color-text-secondary);
  }
}

html.theme-dark pre[data-lang]::before {
  background-color: var(--color-gray-800);
  color: var(--color-text-secondary);
}
